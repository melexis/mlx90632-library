:flags:
  :test:
    :compile:
      :*:
        - -m64
        - -Wall
        - -Wno-address
        - -Wno-attributes
        - -Wno-unused-function
        - -std=c99
        - -pedantic
        - -g
        - -fprofile-arcs
        - -ftest-coverage
    :link:
      :*:
        - -lm
        - -m64
        - -lgcov
        - --coverage

:tools:
  :test_compiler:
    :executable: gcc
    :arguments:
  :test_linker:
    :executable: gcc
    :arguments:
      - -lm
  :gcov_compiler:
    :executable: gcc
    :arguments:
  :gcov_linker:
    :executable: gcc
    :arguments:
      - -lm
  :gcov_fixture:
    :executable: ${1}
  :gcov_report:
    :executable: gcov
    :arguments:
      - -n
      - -p
      - -b
      - -o "$": GCOV_BUILD_OUTPUT_PATH
      - "\"${1}\""
  :gcov_post_report:
    :executable: gcovr
    :optional: FALSE
    :arguments:
        - -p
        - -b
        - -e '.*tools.*|.*build.*|.*test/Test.*'
        - --html
        - --html-details
        - -r .
        - -o build/artifacts/gcov/index.html
